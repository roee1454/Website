<nav class="header sticky backdrop-blur top-0 z-10 flex h-24 items-center justify-between p-5 pb-10 select-none">
    <div class="flex items-center text-lg font-light tracking-tight">
        <a routerLink="/" class="text-primary hover:opacity-80 transition-opacity no-underline">~</a>
        <span class="text-text-base">/</span>
        @if (currentPath()) {
        <span class="text-text-base cursor-default">{{ currentPath() }}</span>
        <span class="text-text-base cursor-default">/</span>
        }
        <span class="ml-1 inline-block h-[17px] w-[7px] bg-primary animate-[blink_2s_ease-in-out_infinite]"></span>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden md:flex gap-8 items-center">
        <a routerLink="/" routerLinkActive="text-primary" [routerLinkActiveOptions]="{exact: true}"
            class="text-text-muted text-sm transition-all hover:text-primary">Home</a>
        <a routerLink="/about" routerLinkActive="text-primary"
            class="text-text-muted text-sm transition-all hover:text-primary">About</a>
        <a routerLink="/projects" routerLinkActive="text-primary"
            class="text-text-muted text-sm transition-all hover:text-primary">Projects</a>
        <a target="_blank" routerLink="/resume" routerLinkActive="text-primary"
            class="text-text-muted text-sm transition-all hover:text-primary flex items-center">
            Resume
            <ng-icon name="lucideExternalLink" size="14" class="ml-1"></ng-icon>
        </a>

        <!-- Desktop Color Palette -->
        <div class="relative group">
            <button class="flex items-center text-text-muted hover:text-primary transition-colors pt-1">
                <ng-icon name="lucidePalette" size="20"></ng-icon>
            </button>
            <div
                class="absolute right-0 top-full mt-2 w-48 p-3 bg-bg-surface rounded-lg shadow-xl border border-bg-container opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform origin-top-right">
                <h3 class="text-xs font-semibold text-text-muted mb-2 uppercase tracking-wide">Theme Color</h3>
                <app-color-chooser />
            </div>
        </div>
    </div>

    <!-- Mobile Menu Button -->
    <button (click)="toggleMobileMenu()" class="md:hidden text-text-base hover:text-primary transition-colors">
        <ng-icon name="lucideMenu" size="24"></ng-icon>
    </button>
</nav>

<!-- Mobile Sheet Menu -->
<div class="fixed inset-0 z-50 flex justify-end pointer-events-none">
    <!-- Overlay -->
    <div class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300"
        [class.opacity-0]="!isMobileMenuOpen()" [class.pointer-events-none]="!isMobileMenuOpen()"
        [class.pointer-events-auto]="isMobileMenuOpen()" (click)="closeMobileMenu()">
    </div>

    <!-- Sheet -->
    <div class="relative h-full w-full max-w-xs bg-bg-surface shadow-2xl p-6 flex flex-col gap-8 transition-transform duration-300 pointer-events-auto"
        [class.translate-x-full]="!isMobileMenuOpen()" [class.translate-x-0]="isMobileMenuOpen()">
        <div class="flex items-center justify-between">
            <h2 class="text-lg font-bold text-primary">Navigation</h2>
            <button (click)="closeMobileMenu()" class="text-text-muted hover:text-primary transition-colors">
                <ng-icon name="lucideX" size="24"></ng-icon>
            </button>
        </div>

        <!-- Color Chooser (Mobile) -->
        <div class="py-2">
            <app-color-chooser />
        </div>

        <nav class="flex flex-col gap-6">
            <a routerLink="/" routerLinkActive="text-primary" [routerLinkActiveOptions]="{exact: true}"
                (click)="closeMobileMenu()"
                class="text-text-muted text-lg font-medium transition-all hover:text-primary flex items-center justify-between">
                Home
                <ng-icon name="lucideArrowRight" size="16"></ng-icon>
            </a>
            <a routerLink="/about" routerLinkActive="text-primary" (click)="closeMobileMenu()"
                class="text-text-muted text-lg font-medium transition-all hover:text-primary flex items-center justify-between">
                About
                <ng-icon name="lucideArrowRight" size="16"></ng-icon>
            </a>
            <a routerLink="/projects" routerLinkActive="text-primary" (click)="closeMobileMenu()"
                class="text-text-muted text-lg font-medium transition-all hover:text-primary flex items-center justify-between">
                Projects
                <ng-icon name="lucideArrowRight" size="16"></ng-icon>
            </a>
            <a target="_blank" routerLink="/resume" routerLinkActive="text-primary" (click)="closeMobileMenu()"
                class="text-text-muted text-lg font-medium transition-all hover:text-primary flex items-center justify-between">
                Resume
                <ng-icon name="lucideExternalLink" size="16"></ng-icon>
            </a>
        </nav>
    </div>
</div>